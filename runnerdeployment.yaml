# apply changes with 'kubectl apply -f runnerdeployment.yaml'
apiVersion: actions.summerwind.dev/v1alpha1
kind: RunnerDeployment
metadata:
  name: actions-runner
spec:
  template:
    spec:
      repository: swils23/actions-experiment
---
apiVersion: actions.summerwind.dev/v1alpha1
kind: HorizontalRunnerAutoscaler
metadata:
  name: actions-runner-autoscaler
spec:
  minReplicas: 1
  maxReplicas: 10
  scaleTargetRef:
    kind: RunnerDeployment
    # # In case the scale target is RunnerSet:
    # kind: RunnerSet
    name: actions-runner
  scaleUpTriggers:
    - githubEvent:
        workflowJob: {}
      duration: "30m"




# spec:
#   # scaleDownDelaySecondsAfterScaleOut: 60
#   scaleTargetRef:
#     kind: RunnerDeployment
#     # # In case the scale target is RunnerSet:
#     # kind: RunnerSet
#     name: actions-runner
#   minReplicas: 6
#   maxReplicas: 10
#   # scaleUpTriggers:
#   #   - githubEvent:
#   #       workflowJob: {}
#   #     duration: "30m"
#   metrics:
#   - type: TotalNumberOfQueuedAndInProgressWorkflowRuns
#     repositoryNames:
#     # A repository name is the REPO part of `github.com/OWNER/REPO`
#     - actions-experiment
    